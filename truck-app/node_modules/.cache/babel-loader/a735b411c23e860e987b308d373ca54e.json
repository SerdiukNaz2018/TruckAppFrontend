{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\serdi\\\\source\\\\repos\\\\TruckAppFrontend\\\\truck-app\\\\src\\\\containers\\\\Trucks\\\\Trucks.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Truck from \"./Truck/Truck\";\nimport classes from \"./Trucks.module.css\";\nimport NewTruck from \"./Truck/NewTruck/NewTruck\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport loginClasses from \"../Home/Home.module.css\";\nimport LoginForm from \"../Home/LoginForm/LoginForm\";\nimport UserBlock from \"../Home/UserBlock/UserBlock\";\nimport UserList from \"../Home/UserList/UserList\";\nimport SignUpForm from '../Home/SignUpForm/SignUpForm';\n\nclass Trucks extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      truckList: null,\n      loading: true,\n      searchRequest: \"\",\n      adding: false,\n      loggining: true,\n      signingUp: false,\n      userInfo: {\n        status: null,\n        isActive: null,\n        id: null,\n        fullName: null,\n        age: null,\n        sex: null,\n        email: null,\n        dateOfBirth: null,\n        imagePath: null\n      }\n    };\n\n    this.disableSignUp = () => {\n      this.setState({\n        signingUp: false,\n        loggining: true\n      });\n    };\n\n    this.enableSignUp = () => {\n      this.setState({\n        signingUp: true,\n        loggining: false\n      });\n    };\n\n    this.disableLoginForm = () => {\n      this.setState({\n        loggining: false\n      });\n    };\n\n    this.setUserInfo = data => {\n      const newState = { ...this.state\n      };\n      newState.loggining = false;\n      newState.userInfo.isActive = data.isActive;\n      newState.userInfo.age = data.years;\n      newState.userInfo.sex = data.sex;\n      newState.userInfo.email = data.email;\n      newState.userInfo.dateOfBirth = data.dateOfBirth;\n      newState.userInfo.imagePath = data.imagePath;\n      newState.userInfo.age = data.age;\n      newState.userInfo.fullName = data.fullName;\n      newState.userInfo.id = data.id;\n      newState.userInfo.status = data.role;\n      newState.userInfo.country = data.country;\n      this.setState(newState);\n    };\n\n    this.enableAddingMode = () => {\n      this.setState({\n        adding: true\n      });\n    };\n\n    this.disableAddingMode = () => {\n      this.setState({\n        adding: false\n      });\n    };\n\n    this.setupTruckList = () => {\n      this.setState({\n        loading: true\n      });\n      axios.get(\"http://localhost:8088/api/truck\").then(response => {\n        this.setState({\n          truckList: response.data,\n          loading: false\n        });\n      }).catch(error => {\n        console.log(error.message);\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.sortHandler = event => {\n      this.setState({\n        loading: true\n      });\n      axios.get(`http://localhost:8088/api/truck?SortBy=${event.target.value}`).then(response => {\n        this.setState({\n          loading: false\n        });\n        this.setState({\n          truckList: response.data\n        });\n      }).catch(error => {\n        this.setState({\n          loading: false\n        });\n        console.log(error);\n      });\n    };\n\n    this.searchButtonHandler = () => {\n      this.setState({\n        loading: true\n      });\n      axios.get(`http://localhost:8088/api/truck?SearchQuery=${this.state.searchRequest}`).then(response => {\n        this.setState({\n          loading: false\n        });\n        this.setState({\n          truckList: response.data\n        });\n      }).catch(error => {\n        this.setState({\n          loading: false\n        });\n        console.log(error);\n      });\n    };\n\n    this.setSearchRequest = event => {\n      this.setState({\n        searchRequest: event.target.value\n      });\n    };\n\n    this.searchHandler = event => {\n      this.setState({\n        loading: true\n      });\n      axios.get(`http://localhost:8088/api/truck?SearchQuery=${event.target.value}`).then(response => {\n        this.setState({\n          loading: false\n        });\n        this.setState({\n          truckList: response.data\n        });\n      }).catch(error => {\n        this.setState({\n          loading: false\n        });\n        console.log(error);\n      });\n    };\n\n    this.reverseTruckList = () => {\n      const reversed = [...this.state.truckList];\n      reversed.reverse();\n      this.setState({\n        truckList: reversed\n      });\n    };\n  }\n\n  shouldComponentUpdate(_, nextState) {\n    return JSON.stringify(nextState.truckList) !== JSON.stringify(this.state.truckList) || this.state.loading !== nextState.loading || this.state.adding !== nextState.adding || this.state.admin !== nextState.admin || this.state.loggining !== nextState.loggining || JSON.stringify(this.state.userInfo) !== JSON.stringify(nextState.userInfo) || nextState.showUsers !== this.state.showUsers || nextState.signingUp !== this.state.signingUp;\n  }\n\n  componentDidMount() {\n    this.setupTruckList();\n  }\n\n  render() {\n    let trucks = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 22\n      }\n    }, \"Loading...\");\n\n    if (!this.state.loading) {\n      trucks = this.state.truckList.map((truck, index) => {\n        return /*#__PURE__*/React.createElement(Truck, {\n          key: truck.id,\n          reload: this.setupTruckList,\n          truckId: truck.id,\n          brand: truck.brand,\n          model: truck.model,\n          priceUSD: truck.priceUSD,\n          priceEUR: truck.priceEUR,\n          priceUAH: truck.priceUAH,\n          yearGraduation: truck.yearGraduation,\n          years: truck.amountYear,\n          country: truck.country,\n          licensePlate: truck.registrationPlate,\n          source: truck.imagePath,\n          admin: this.state.userInfo.status === \"admin\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 21\n          }\n        });\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(SignUpForm, {\n      visible: this.state.signingUp,\n      close: this.disableSignUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: loginClasses.Home,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(LoginForm, {\n      visible: this.state.loggining,\n      enableRegularMode: this.disableLoginForm,\n      setUserInfo: this.setUserInfo,\n      signUp: this.enableSignUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }), this.state.userInfo.status ? /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(UserBlock, {\n      name: this.state.userInfo.fullName,\n      age: this.state.userInfo.age,\n      email: this.state.userInfo.email,\n      sex: this.state.userInfo.sex,\n      dateOfBirth: this.state.userInfo.dateOfBirth,\n      imagePath: this.state.userInfo.imagePath,\n      status: this.state.userInfo.status,\n      country: this.state.userInfo.country,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 29\n      }\n    }), this.state.userInfo.status === \"admin\" ? /*#__PURE__*/React.createElement(UserList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 33\n      }\n    }) : null) : null), !this.state.loggining && !this.state.signingUp ? /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.Trucks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 21\n      }\n    }, \"Trucks: \"), /*#__PURE__*/React.createElement(NewTruck, {\n      visible: this.state.adding,\n      enableRegularMode: this.disableAddingMode,\n      resetTruckList: this.setupTruckList,\n      userId: this.state.userInfo.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"search\",\n      placeholder: \"Search \\uD83D\\uDD0E\",\n      onChange: this.setSearchRequest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.searchButtonHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, \"Search\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"sort\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 25\n      }\n    }, \"Sort by: \"), /*#__PURE__*/React.createElement(\"select\", {\n      id: \"sort\",\n      style: {\n        borderRadius: \"10px\",\n        margin: \"10px\"\n      },\n      onChange: this.sortHandler,\n      defaultValue: \"Brand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PriceUSD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 29\n      }\n    }, \"Price\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AmountYear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 29\n      }\n    }, \"Year\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Brand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 29\n      }\n    }, \"Brand\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Model\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 29\n      }\n    }, \"Model\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Country\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 29\n      }\n    }, \"Country\")), /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        height: \"30px\",\n        width: \"60px\",\n        borderRadius: \"10px\"\n      },\n      onClick: this.reverseTruckList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 25\n      }\n    }, \"\\u2191 \\u2193\")), this.state.userInfo.status !== 'admin' ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      style: {\n        height: \"50px\",\n        width: \"215px\",\n        borderRadius: \"10px\"\n      },\n      onClick: this.enableAddingMode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 25\n      }\n    }, \"New Truck\")) : null, this.state.loading ? /*#__PURE__*/React.createElement(Spinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 25\n      }\n    }) : trucks.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 25\n      }\n    }, \"No trucks found...\") : trucks) : null);\n  }\n\n}\n\nexport default Trucks;","map":{"version":3,"sources":["C:/Users/serdi/source/repos/TruckAppFrontend/truck-app/src/containers/Trucks/Trucks.js"],"names":["React","Component","axios","Truck","classes","NewTruck","Spinner","loginClasses","LoginForm","UserBlock","UserList","SignUpForm","Trucks","state","truckList","loading","searchRequest","adding","loggining","signingUp","userInfo","status","isActive","id","fullName","age","sex","email","dateOfBirth","imagePath","disableSignUp","setState","enableSignUp","disableLoginForm","setUserInfo","data","newState","years","role","country","enableAddingMode","disableAddingMode","setupTruckList","get","then","response","catch","error","console","log","message","sortHandler","event","target","value","searchButtonHandler","setSearchRequest","searchHandler","reverseTruckList","reversed","reverse","shouldComponentUpdate","_","nextState","JSON","stringify","admin","showUsers","componentDidMount","render","trucks","map","truck","index","brand","model","priceUSD","priceEUR","priceUAH","yearGraduation","amountYear","registrationPlate","Home","margin","borderRadius","height","width","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport Truck from \"./Truck/Truck\";\r\nimport classes from \"./Trucks.module.css\";\r\nimport NewTruck from \"./Truck/NewTruck/NewTruck\";\r\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\r\nimport loginClasses from \"../Home/Home.module.css\";\r\nimport LoginForm from \"../Home/LoginForm/LoginForm\";\r\nimport UserBlock from \"../Home/UserBlock/UserBlock\";\r\nimport UserList from \"../Home/UserList/UserList\";\r\nimport SignUpForm from '../Home/SignUpForm/SignUpForm';\r\n\r\nclass Trucks extends Component {\r\n    state = {\r\n        truckList: null,\r\n        loading: true,\r\n        searchRequest: \"\",\r\n        adding: false,\r\n        loggining: true,\r\n        signingUp: false,\r\n        userInfo: {\r\n            status: null,\r\n            isActive: null,\r\n            id: null,\r\n            fullName: null,\r\n            age: null,\r\n            sex: null,\r\n            email: null,\r\n            dateOfBirth: null,\r\n            imagePath: null,\r\n        },\r\n    };\r\n\r\n    disableSignUp = () => {\r\n        this.setState({signingUp: false, loggining: true});\r\n    }\r\n\r\n    enableSignUp = () => {\r\n        this.setState({signingUp: true, loggining: false});\r\n    }\r\n\r\n    disableLoginForm = () => {\r\n        this.setState({ loggining: false });\r\n    };\r\n\r\n    setUserInfo = data => {\r\n        const newState = { ...this.state };\r\n        newState.loggining = false;\r\n        newState.userInfo.isActive = data.isActive;\r\n        newState.userInfo.age = data.years;\r\n        newState.userInfo.sex = data.sex;\r\n        newState.userInfo.email = data.email;\r\n        newState.userInfo.dateOfBirth = data.dateOfBirth;\r\n        newState.userInfo.imagePath = data.imagePath;\r\n        newState.userInfo.age = data.age;\r\n        newState.userInfo.fullName = data.fullName;\r\n        newState.userInfo.id = data.id;\r\n        newState.userInfo.status = data.role;\r\n        newState.userInfo.country = data.country;\r\n\r\n        this.setState(newState);\r\n\r\n    };\r\n\r\n    enableAddingMode = () => {\r\n        this.setState({ adding: true });\r\n    };\r\n\r\n    disableAddingMode = () => {\r\n        this.setState({ adding: false });\r\n    };\r\n\r\n    shouldComponentUpdate(_, nextState) {\r\n        return (\r\n            JSON.stringify(nextState.truckList) !==\r\n                JSON.stringify(this.state.truckList) ||\r\n            this.state.loading !== nextState.loading ||\r\n            this.state.adding !== nextState.adding ||\r\n            this.state.admin !== nextState.admin ||\r\n            this.state.loggining !== nextState.loggining ||\r\n            JSON.stringify(this.state.userInfo) !==\r\n                JSON.stringify(nextState.userInfo) ||\r\n            nextState.showUsers !== this.state.showUsers ||\r\n            nextState.signingUp !== this.state.signingUp\r\n        );\r\n    }\r\n\r\n    setupTruckList = () => {\r\n        this.setState({ loading: true });\r\n        axios\r\n            .get(\"http://localhost:8088/api/truck\")\r\n            .then(response => {\r\n                this.setState({ truckList: response.data, loading: false });\r\n            })\r\n            .catch(error => {\r\n                console.log(error.message);\r\n                this.setState({ loading: false });\r\n            });\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.setupTruckList();\r\n    }\r\n\r\n    sortHandler = event => {\r\n        this.setState({ loading: true });\r\n        axios\r\n            .get(`http://localhost:8088/api/truck?SortBy=${event.target.value}`)\r\n            .then(response => {\r\n                this.setState({ loading: false });\r\n                this.setState({ truckList: response.data });\r\n            })\r\n            .catch(error => {\r\n                this.setState({ loading: false });\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    searchButtonHandler = () => {\r\n        this.setState({ loading: true });\r\n        axios\r\n            .get(\r\n                `http://localhost:8088/api/truck?SearchQuery=${this.state.searchRequest}`\r\n            )\r\n            .then(response => {\r\n                this.setState({ loading: false });\r\n                this.setState({ truckList: response.data });\r\n            })\r\n            .catch(error => {\r\n                this.setState({ loading: false });\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    setSearchRequest = event => {\r\n        this.setState({ searchRequest: event.target.value });\r\n    };\r\n\r\n    searchHandler = event => {\r\n        this.setState({ loading: true });\r\n        axios\r\n            .get(\r\n                `http://localhost:8088/api/truck?SearchQuery=${event.target.value}`\r\n            )\r\n            .then(response => {\r\n                this.setState({ loading: false });\r\n                this.setState({ truckList: response.data });\r\n            })\r\n            .catch(error => {\r\n                this.setState({ loading: false });\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    reverseTruckList = () => {\r\n        const reversed = [...this.state.truckList];\r\n        reversed.reverse();\r\n        this.setState({ truckList: reversed });\r\n    };\r\n\r\n    render() {\r\n        let trucks = <p>Loading...</p>;\r\n\r\n        if (!this.state.loading) {\r\n            trucks = this.state.truckList.map((truck, index) => {\r\n                return (\r\n                    <Truck\r\n                        key={truck.id}\r\n                        reload={this.setupTruckList}\r\n                        truckId={truck.id}\r\n                        brand={truck.brand}\r\n                        model={truck.model}\r\n                        priceUSD={truck.priceUSD}\r\n                        priceEUR={truck.priceEUR}\r\n                        priceUAH={truck.priceUAH}\r\n                        yearGraduation={truck.yearGraduation}\r\n                        years={truck.amountYear}\r\n                        country={truck.country}\r\n                        licensePlate={truck.registrationPlate}\r\n                        source={truck.imagePath}\r\n                        admin={this.state.userInfo.status === \"admin\"}\r\n                    />\r\n                );\r\n            });\r\n        }\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <SignUpForm visible = {this.state.signingUp} close = {this.disableSignUp}/>\r\n                <div className={loginClasses.Home}>\r\n                    <LoginForm\r\n                        visible={this.state.loggining}\r\n                        enableRegularMode={this.disableLoginForm}\r\n                        setUserInfo={this.setUserInfo}\r\n                        signUp = {this.enableSignUp}\r\n                    />\r\n                    {this.state.userInfo.status ? (\r\n                        <React.Fragment>\r\n                            <UserBlock\r\n                                name={this.state.userInfo.fullName}\r\n                                age={this.state.userInfo.age}\r\n                                email={this.state.userInfo.email}\r\n                                sex={this.state.userInfo.sex}\r\n                                dateOfBirth={this.state.userInfo.dateOfBirth}\r\n                                imagePath={this.state.userInfo.imagePath}\r\n                                status={this.state.userInfo.status}\r\n                                country = {this.state.userInfo.country}\r\n                            />\r\n                            {this.state.userInfo.status === \"admin\" ? (\r\n                                <UserList />\r\n                            ) : null}\r\n                        </React.Fragment>\r\n                    ) : null}\r\n                </div>\r\n\r\n                { !this.state.loggining && !this.state.signingUp?\r\n                <div className={classes.Trucks}>\r\n                    <h2>Trucks: </h2>\r\n                    <NewTruck\r\n                        visible={this.state.adding}\r\n                        enableRegularMode={this.disableAddingMode}\r\n                        resetTruckList={this.setupTruckList}\r\n                        userId = {this.state.userInfo.id}\r\n                    />\r\n                    <input\r\n                        type=\"search\"\r\n                        placeholder=\"Search &#128270;\"\r\n                        onChange={this.setSearchRequest}\r\n                    />\r\n                    <button onClick={this.searchButtonHandler}>Search</button>\r\n\r\n                    <div style={{ margin: \"10px\" }}>\r\n                        <label htmlFor=\"sort\">Sort by: </label>\r\n                        <select\r\n                            id=\"sort\"\r\n                            style={{ borderRadius: \"10px\", margin: \"10px\" }}\r\n                            onChange={this.sortHandler}\r\n                            defaultValue=\"Brand\"\r\n                        >\r\n                            <option value=\"PriceUSD\">Price</option>\r\n                            <option value=\"AmountYear\">Year</option>\r\n                            <option value=\"Brand\">Brand</option>\r\n                            <option value=\"Model\">Model</option>\r\n                            <option value=\"Country\">Country</option>\r\n                        </select>\r\n                        <button\r\n                            style={{\r\n                                height: \"30px\",\r\n                                width: \"60px\",\r\n                                borderRadius: \"10px\",\r\n                            }}\r\n                            onClick={this.reverseTruckList}\r\n                        >\r\n                            ↑ ↓\r\n                        </button>\r\n                    </div>\r\n                    {this.state.userInfo.status !== 'admin' ?\r\n                    <div>\r\n                        <button\r\n                            style={{\r\n                                height: \"50px\",\r\n                                width: \"215px\",\r\n                                borderRadius: \"10px\",\r\n                            }}\r\n                            onClick={this.enableAddingMode}\r\n                        >\r\n                            New Truck\r\n                        </button>\r\n                    </div>\r\n                    : null}\r\n                    {this.state.loading ? (\r\n                        <Spinner />\r\n                    ) : trucks.length === 0 ? (\r\n                        <p>No trucks found...</p>\r\n                    ) : (\r\n                        trucks\r\n                    )}\r\n                </div> : null}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Trucks;\r\n"]},"metadata":{},"sourceType":"module"}